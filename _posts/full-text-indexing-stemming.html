title: Full text indexing - stemming
date: 2008/10/22 05:14:00 -0700
tags: [{"name":"localisation","id":58669318},{"name":"SQLServer","id":3772599}]
author: Jane Dallaway
alias: /full-text-indexing-stemming

A part of the full text indexing engine that I've never made much use of is the stemming aspect.  When the full text index is generated for an object the words stored are parsed to remove any noise words (to see the noise words for English take a look at C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\FTData\noiseENG.txt or similar - words such as about, another, and etc are considered as noise).  The MS Full text index comes with the ability to match the stems of words - so if you were to index an object containing the word run, then a search looking for ran, runs, running etc should also match - basically the different tenses of the verb.<p />To try this out, create a full text index on a table and specify British English as the word breaker.  I've created a simple table as follows:<p /><span class="code">SET ANSI_NULLS ON<br />GO<br />SET QUOTED_IDENTIFIER ON<br />GO<br />CREATE TABLE [dbo].[test](<br />[Id] [int] IDENTITY(1,1) NOT NULL,<br />[Word] [nvarchar](50) NULL,<br />CONSTRAINT [PK_test] PRIMARY KEY CLUSTERED<br />(<br />[Id] ASC<br />)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]<br />) ON [PRIMARY]</span><p />My full text index is defined on the column [Word].<p />Enter some text into the indexed column(s), in my case, I ran the following insert statements:<p /><span class="code">INSERT INTO [test] ([Word]) VALUES ('run')<br />INSERT INTO [test] ([Word]) VALUES ('swim')<br />INSERT INTO [test] ([Word]) VALUES ('walk')<br />INSERT INTO [test] ([Word]) VALUES ('cycle')</span><p />Using the standard contains syntax, searching for 'run' as follows<p /><span class="code">SELECT * FROM Test<br />WHERE CONTAINS(Word, 'run')</span><p />returns<br /><span class="code">Id          Word<br />----------- --------------------------------------------------<br />1           run<p />(1 row(s) affected)</span><p />If I search for 'ran' as follows:<p /><span class="code">SELECT * FROM Test<br />WHERE CONTAINS(Word, 'ran')</span><p />I get:<p /><span class="code">Id          Word<br />----------- --------------------------------------------------<p />(0 row(s) affected)</span><p />probably as expected.<p />If I change the syntax to make use of the FORMSOF (INFLECTIONAL sytnax to look for 'ran' as follows:<p /><span class="code">SELECT * FROM Test<br />WHERE CONTAINS(Word, ' FORMSOF (INFLECTIONAL, ran) ')</span><p />I get:<p /><span class="code">Id          Word<br />----------- --------------------------------------------------<br />1           run<p />(1 row(s) affected)</span><p />I get the same results if I look for 'run' or 'running' using the FORMSOF (INFLECTIONAL syntax, so this obviously improves the search results as the tense of verbs is no longer so relevant.<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-2089750909858403362?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
