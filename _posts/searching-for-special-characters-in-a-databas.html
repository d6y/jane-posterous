title: Searching for 'special' characters in a database using TSQL
date: 2008/05/30 05:56:00 -0700
tags: [{"name":"SQLServer","id":58677977}]
author: Jane Dallaway
alias: /searching-for-special-characters-in-a-databas

One of my colleagues asked me for some quick SQL help earlier.  Some data in the database he was looking at had ended up with a 'special character' on the end of it in a specific table.  This didn't affect all rows, just some, but he needed helping identify those rows.<p />For the sake of arguments, lets imagine that the table was called Item, and the affected column was named Name, and there was also an Id column named ItemId.  He knew one of the affected Items, and so we examined the data to determine what character it was at the end.  To do this we did<p /><span class="code">SELECT ASCII(SUBSTRING(Name,10,1)) <br />FROM Item<br />WHERE ItemId = 100</span><p />This informed us that the character was actually ASCII value 160.  Knowing this, I then used the <a href="http://msdn.microsoft.com/en-us/library/aa276881(SQL.80).aspx">PATINDEX</a> function and produced a query like:<p /><span class="code">SELECT *<br />FROM Item<br />WHERE PATINDEX('%' + CHAR(160) + '%',Name) > 0</span><p />which seemed to return the row that he'd already identified along with new ones.  This is probably not the most performant method, but this was needed to check something in a debugging/support environment and not code that would be run on a regular basis.<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-5582312374370356163?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
