title: TSQL: CONVERT VARCHAR truncates to 30
date: 2009/03/04 02:49:00 -0800
tags: [{"name":"SQLServer","id":58677902}]
author: Jane Dallaway
alias: /tsql-convert-varchar-truncates-to-30

Yesterday, a colleague was attempting to compare a text column in a table against a literal string and kept coming up against the old <br /><span class="code">Msg 402, Level 16, State 1, Line 1<br />The data types text and varchar are incompatible in the equal to operator.</span> error.<p />He was only trying to do some updates based on known data, so I suggested he converted the text column to VARCHAR before doing the comparison.<p />We used <span class="code">CONVERT(VARCHAR, &lt;Text Column&gt;) = '&lt;String to compare&gt;')</span> and were surprised that it didn't match.  We forced the CONVERT to use VARCHAR(100) and this seemed to work ok, so this got me thinking about what a CONVERT to VARCHAR without a length defaulted to.<p /><span class="code">SELECT CONVERT(VARCHAR,'123456789012345678901234567890123456789012345678901234567890123456789')</span><br />resulted in<br /><span class="code">123456789012345678901234567890</span><p /><span class="code">SELECT DATALENGTH(CONVERT(VARCHAR,'123456789012345678901234567890123456789012345678901234567890123456789'))</span><br />resulted in<br /><span class="code">30</span><p />So, CONVERT(VARCHAR, ) converts the contents to a VARCHAR(30) (at least in SQL Server 2005 it does)<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-3807409933934561923?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
