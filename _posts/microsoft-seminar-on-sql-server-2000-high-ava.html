title: Microsoft Seminar on SQL Server 2000 High Availability
date: 2003/03/01 15:09:00 -0800
tags: [{"name":"event","id":58680009},{"name":"SQLServer","id":3773325}]
author: Jane Dallaway
alias: /microsoft-seminar-on-sql-server-2000-high-ava

<h2>Introduction</h2><br />To be honest I wasn't really looking forward to this seminar.  It seemed like a good idea when it was booked, but when I re-read the content I began to think it was going to be very dry and dull.  Thankfully I was wrong.<br />This wasn't a technical &quot;how to&quot; seminar, more of a business &quot;why would I want to&quot; but with a definite technical slant.  Microsoft run quite a few of these <a href="http://www.microsoft.co.uk/events/msehome.asp" target="_top">events</a> on different subjects around the country.<p /><h2>So what is High Availability?</h2><br />A high availability system is one that is needed to have considerable up time because the business relies upon it.<br /><h3>Targets</h3><br />A target of 99% availability actually means that in a year you can have 87 hours of downtime, 1.5 hours a week.  This should be easy to achieve without many special efforts.<p>A target of 99.9% means that 8.7 hours of downtime are acceptable within a year - so we need better hardware, and some redundancy.  But, this is still achievable with good management skills.<br />A target of 99.99% means 52 minutes of downtime per year.  This will require some the use of failover clustering, log shipping or replication as well as the hardware and redunancy mentioned above.<br />A target of 99.999% (or five nines as it's referred to) means 5 minutes of downtime per year.  So, as well as hardware, redundancy and failover clustering, log shipping and replication, you'll be looking at better hardware (SANs etc), large infrastructure redundancy (generators etc) and backup standbys of databases.<br /><h3>Terminology used in this article</h3><br /><ul type="disc"><li><p>Hot Standby - the data is copied automatically onto a secondary server and is transactionally consistent, which will be automatically brought up if the primary fails.</p></li></ul><br /><li>Warm Standby - the data is copied onto a secondary server, but that data may not be transactionally consistent, and the switch may not happen automatically.</li><br /><li>Cold Standby - a server is available where the data could be restored if necessary</li><p /><h2>Seminar Structure</h2><p />The seminar was broken into 3 main &quot;units&quot;:<br /><ul><li>Disaster Prevention</li></ul><br /><li>Disaster Recovery</li><br /><li>Maintaining a High Availability System</li><p /><h3>Disaster Prevention</h3><br />To prevent disaster you need to identify and manage your risks.  This involves a five stage approach.<br /><ol><li>Identify your risks</li></ol><br /><li>Analyse them - how often, how probable, cost</li><br /><li>Plan for them - how to avoid them, how to deal with them</li><br /><li>Track - analyse the things that do happen, and use this to feed back into your plan and make your plan more encompassing</li><br /><li>Control</li><br />There is more risk management information available at <a href="http://www.microsoft.com/technet/treeview/default.asp?url=/technet/ittasks/plan/teamops/risk.asp" target="_top">Microsoft.com</a><p />In a highly available system, redundant hardware and automated failover to a standby system are considerations.  SQL Server 2000 Failover clustering based on top of standard Windows clustering (of up to 4 servers) and is a Hot Standby solution.  One thing to bear in mind is that the client application must be cluster aware, and this holds true for all availability models, and not depend on a specific server name.  Otherwise, the database will remain available, but the system will not.<p /><h3>Disaster Recovery</h3><br />When a disaster happens, we need to be able to recover from it, and get the system up and available again as soon as possible - preferably instantly.<br />To help us in this we need a disaster recovery plan - this needs to contain:<br /><ul><li>resource information (Tools, Hardware and software and key technical staff's contact details)</li></ul><br /><li>procedural information (Timelines, process to bring the system back up, process to analyse the results of the recovery operation)</li><br /><li>back up site information (where the hot backup, warm backup, cold backup sites are) scenario information (environmental impacts - hardware failure or natural disaster, SQL</li><br /><li>Server impacts - corrupt data, related systems impact - application or network failure, cluster failure etc)</li><p />There is more planning information at <a href="http://www.microsoft.com/sql/techinfo/planning/default.asp" target="_top">Microsoft.com</a><p />Techniques for this are:<br /><ul><li>Log shipping - i.e. getting transactional logs copied to other servers.  This can be used with network load balancing triggering the server that the applications should connect to.</li></ul><br /><li>Replication - not designed for availability, designed for scalability, but does meet some of the requirements.  This allows for a master database (Publisher) to publish data (whole tables, or just horizontal or vertical slices of data) to Subscribers.</li><br /><li>Backup and restore - choosing the right backup strategy is important, and key to the length of time it will take to restore that data.</li><br />Both Log Shipping and replication are warm standby solutions.<br />Backup and restore is a cold standby solution.<br />And then of course, keeping that disaster recovery plan a living document - if something goes wrong that you hadn't planned for - add it.  If someone moves/leaves then change the document.  There is no point having a document that has incorrect information in it if the dreaded disaster does happen.<p /><h3>Maintaining a High Availability System</h3><br />In order to stand a chance of keeping a system available there are some people constraints which will need to be considered - for instance making sure that your database administrators are fully aware of your plans.  They need to work as a team, so that everyone knows enough about every system to ensure that the responsibility is shared.  They need to ensure that change control is carefully monitored to reduce risk, and when a change is implemented they should always have a backup plan.  Good monitoring tools should be employed so that the DBAs are informed of any concerns asap.<p /><h2>Summary</h2><br />Overall I was impressed.  This seminar was worth attending, especially as it was free.  It provided a useful overview of the main different techniques for achieving a high availability system and I didn't come away brainwashed.  Yes, the techniques are specific to SQL Server 2000 but the theory and planning should be sound.  I'm definitely going to keep an eye open for future seminars.<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-115101118438055620?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div></p>
