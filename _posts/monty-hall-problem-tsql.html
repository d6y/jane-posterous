title: Monty Hall problem - TSQL
date: 2008/07/04 11:08:00 -0700
tags: [{"name":"code","id":58668080},{"name":"SQLServer","id":58668106}]
author: Jane Dallaway
alias: /monty-hall-problem-tsql

<p>Following on from <a href="http://jane.dallaway.com/monty-hall-problem-php">this morning's post about the Monty Hall problem</a>, and proving it in PHP I figured I'd prove it in TSQL as well.<p />So <a href="http://docs.google.com/leaf?id=0B_AkC4ZdTI9tOTcxOWVmY2YtMWVkNi00OGIyLWJjZDAtOTJjNzMwZjg5Nzgy&amp;hl=en_GB">here</a> is my SQL version.<p />To maintain consistency with <a href="https://docs.google.com/leaf?id=0B_AkC4ZdTI9tY2Q1M2Y0NjUtYTkwMy00YzIwLWI2YmUtZTU5MjA0ZDNkZGI0&amp;hl=en_GB">my PHP version</a>, I've made it output similar text, so the results are along the lines of:<br /><span class="code">Monty Hall Problem<br />This is a simple TSQL query to prove the Monty Hall problem [<a href="http://en.wikipedia.org/wiki/Monty_hall_problem">http://en.wikipedia.org/wiki/Monty_hall_problem</a>]<p /> ------------------------<br />The Results are in:<br />------------------------<br />Out of 10000 games, the contestant was right to swap 66.94% of the time and wrong 33.06% of the time</span><p />The TSQL version is a bit more elegant with regards to working out which door to open for the contestant, as it is a simple statement of <br /><span class="code">SELECT TOP 1 @Opened = DoorNumber<br />FROM @Doors<br />WHERE DoorNumber NOT IN (@Prize, @Picked)<br />ORDER BY NEWID()</span><br />making the most of set theory to enable the exclusion of the @Prize door and the @Picked door as opposed to the same thing in my PHP code<br /><span class="code"> $remaining = array();<br />/* the gameshow host opens a door which has nothing behind it, so the gameshow host knows where the prize is<br />but can't choose to open the door the contestant has chosen, so remove both picked and prize from the options, <br />this leaves either one of two doors that can be opened, so pick one randomly */<br /> for ($i=0; $i&lt;3; $i ++)<br /> {<br /> &nbsp;&nbsp;switch($doors[$i])<br /> &nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;case $prize:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;case $picked:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;default:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array_push($remaining,$doors[$i]);<br />&nbsp;&nbsp;}  <br /> }<br /> $opened = $remaining[array_rand($remaining)];</span><br />which is all a bit more procedural and, at least to my mind, less elegant - but then again I like the syntax of SQL which either makes me a freak or a masochist (according to at least one colleague)</p>
