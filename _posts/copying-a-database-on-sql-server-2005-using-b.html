title: Copying a database on SQL Server 2005 using Backup and Restore
date: 2007/11/07 08:29:00 -0800
tags: [{"name":"SQLServer","id":3772836}]
author: Jane Dallaway
alias: /copying-a-database-on-sql-server-2005-using-b

I always forget to do this, so this is a reminder for me.  Hope it comes in handy for others too.<p />One of the things I do quite often, but obviously not enough, is to create a new database based on an existing one.  I've tried various methods over the years, but backup and restore seems to work reliably and without too many headaches, and it doesn't involve taking the database offline either.<p />So, for instance to create a new database named JaneDallawayTest from and existing database called JaneTest I would do the following:<br />Backup JaneTest and store the resultant file somewhere I can get hold of it from<br />Then restore that backup to a new database named JaneDallawayTest by executing the following SQL:<br /><span class="code">RESTORE DATABASE [JaneDallawayTest] <br />FROM disk = N'JaneTestBackup.bak' <br />WITH FILE = 1 , <br />move N'JaneTest' <br />TO N'G:\SQLData\JaneDallawayTest.mdf' , <br />move N'JaneTest_log' TO N'G:\SQLData\JaneDallawayTest_log.ldf' , <br />nounload , stats = 10 , replace<br />GO</span><p />All that is left to do is to update the logical name for the new database in the Database Properties dialog.<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-8742591140799040280?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
