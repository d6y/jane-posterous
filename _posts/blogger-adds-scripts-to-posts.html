title: Blogger adds scripts to posts
date: 2009/07/07 06:06:00 -0700
tags: [{"name":"howto","id":58676428},{"name":"tool","id":58676429}]
author: Jane Dallaway
alias: /blogger-adds-scripts-to-posts

Over the weekend, I <a href="http://www.janeandrichard.co.uk/blog/archive/2009_07_01_index.xml#276816603049907065">blogged</a> at the <a href="http://www.janeandrichard.co.uk/">Jane and Richard</a> site, and broke the site due to using & in the post.  I checked, and double checked, the post and couldn't find an issue.  So I deleted the post and re-published the site.  Same problem.<p />It turns out that blogger has added script tags to all the posts, so viewing source on this page will show <br /><span class="code">&lt;script type="text/javascript" src="http://www.blogger.com/static/v1/common/js/327583163-csitaillib.js"&gt;&lt;/script&gt;<p />&lt;script&gt;if (typeof(window.attachCsiOnload) != 'undefined' && window.attachCsiOnload != null) { window.attachCsiOnload('ext_blogspot'); }&lt;/script&gt;</span><p />This isn't a problem for this blog, my <a href="http://jane.dallaway.com/photography/photoblog/photoblog.html">photography blog</a> or the <a href="http://www.brightonbloggers.com/blog/">Brighton Bloggers blog</a> but destroys the JaneandRichard one - this blog was set up years ago and we use blogger to output XML rather than HTML based on the following template:<br /><span class="code"><br />&lt;blogs&gt;<br />&lt;title&gt;Recent blog: latest happenings&lt;/title&gt;<br />&lt;Blogger&gt;<br />&nbsp;&lt;BlogDateHeader&gt;<br />&nbsp;&nbsp;&lt;day date="&lt;$BlogDateHeaderDate$&gt;"&gt;<br />&nbsp;&lt;/BlogDateHeader&gt;<br />&nbsp;&lt;blog time="&lt;$BlogItemDateTime$&gt;" by="&lt;$BlogItemAuthor$&gt;" id="&lt;$BlogItemNumber$&gt;"&gt;<br />&nbsp;&nbsp;&lt;title&gt;&lt;$BlogItemTitle$&gt;&lt;/title&gt;<br />&nbsp;&lt;body&gt;&lt;$BlogItemBody$&gt;&lt;/body&gt;<br />&nbsp;&lt;permalink&gt;<a href="http://www.janeandrichard.co.uk/blog/archive/">http://www.janeandrichard.co.uk/blog/archive/</a>&lt;$BlogItemArchiveFileName$&gt;&lt;/permalink&gt;<br />&nbsp;&lt;/blog&gt;<br />&nbsp;&lt;BlogDateFooter&gt;<br />&nbsp;&nbsp;&lt;/day&gt;<br />&nbsp;&lt;/BlogDateFooter&gt;<br />&lt;/Blogger&gt;<br />&lt;/blogs&gt;</span><p />The xml produced by the system now also includes the script contents, which, obviously, then fails parsing and breaks the rendering engine. Blogger are <a href="http://knownissues.blogspot.com/2009/07/javascript-inserted-in-some-classic.html">aware of the issue</a> and have provided a work-around, but I'm a bit too scared to try it as it will result in Richard having to work some more perl magic...<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-5455569764253985108?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
