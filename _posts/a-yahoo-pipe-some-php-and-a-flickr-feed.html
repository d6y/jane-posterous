title: A yahoo pipe, some php and a flickr feed
date: 2008/03/29 04:52:00 -0700
tags: [{"name":"code","id":58669560},{"name":"php","id":3772758}]
author: Jane Dallaway
alias: /a-yahoo-pipe-some-php-and-a-flickr-feed

Over on the <a href="http://www.janeandrichard.co.uk/">JaneandRichard home page</a>, we used to show a random image from our <a href="http://www.janeandrichard.co.uk/photos/index.html">image archive</a>.  However, to add an image to the archive we needed to register it, and this we failed to do very often.  As time went on I was putting photos less often on the JaneandRichard images page, and more often on <a href="http://www.flickr.com/">flickr</a>.  So, I updated the front page to use a <a href="http://flickr.com/badge.gne">flickr badge</a> based on <a href="http://www.flickr.com/photos/janed/">my flickr feed</a>.  This wasn't ideal, as it didn't combine our output.<p /><div class='p_embed p_image_embed'>
<img alt="Media_httpfarm3static_sxwda" height="241" src="/media/getfile/files.posterous.com/import-wdma/GtqeEdFzybGhJxqyarrBmfzHakfibjDeyHaeaqCacxJnynbACcynIHkawand/media_httpfarm3static_sxwda.jpg.scaled500.jpg" width="500" />
</div>
<p />This morning I decided to do a bit of playing, and so produced a <a href="http://pipes.yahoo.com/pipes/">yahoo pipe</a> which <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=hEMydnz93BGrvDZmCB2yXQ">takes Richard's flickr RSS feed, and my one as an input and returns the most recent image</a>.  I then wrote some PHP (well took the <a href="http://www.brightonbloggers.com/aggregated/">Brighton Bloggers aggregated feed</a> PHP actually which in turn was based on the RSS reader produced by <a href="http://richardjameskendall.com">Richard Kendall</a>) and wrote out the RSS description within some javascript.  This allows me to replace the flickr badge on the home page with an image based on the combined feed. <p /><div class='p_embed p_image_embed'>
<img alt="Media_httpfarm3static_haoos" height="241" src="/media/getfile/files.posterous.com/import-wdma/DnFAFelwunewwpbDaEhGBnzJpdmhEcEChhEfrpukBjrBEJzuxyDtIijzmmHC/media_httpfarm3static_HAoos.jpg.scaled500.jpg" width="500" />
</div>
<p />In order to make this more useful, I used a parameter feed to allow other images to be produced by the script.  So, the code<br /><span class="code">&lt;script type="text/javascript" src="http://jane.dallaway.com/services/getImageFromFlickrRss.php?feed=http://api.flickr.com/services/feeds/photos_friends.gne%3fuser_id=11369209@N00%26friends=0%26display_all=1%26lang=en-us%26format=rss_200"&gt;&lt;/script&gt;</span><br />returns the most recent image added by any of my contacts.   The <span class="code">feed</span> parameter needs to have the flickr RSS URL encoded otherwise the script will truncate the output and nothing will be produced.<p />So here is the output from that script - the latest photo from my contacts:<p /><br /><strong>Update</strong>:<br />There is some cacheing going on at the yahoo pipes end, and so the RSS feed from the pipe doesn't reflect the changes in real time, or as quickly as if you run the pipe manually.<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-4847735377841511540?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
