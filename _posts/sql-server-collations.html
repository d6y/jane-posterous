title: SQL Server Collations
date: 2006/07/13 04:09:00 -0700
tags: [{"name":"SQLServer","id":3773157}]
author: Jane Dallaway
alias: /sql-server-collations

Tony Rogerson has an interesting article about <a href="http://sqlblogcasts.com/blogs/tonyrogerson/archive/2006/07/12/883.aspx">Collations in SQL Server, examples and restrictions</a>, explaining how and why they happen and what they mean.  This is a problem I've faced again and again, especially when bringing back customer's data.  One of the slight annoyances I have with Visual Studio 2003 is that when generating create scripts for tables it puts the collation into the table creation scripts, so I often do a search of the database for COLLATE and remove them, taking the code from<br /><span class="code"><br />CREATE TABLE [dbo].[Person] <br />( [PersonID] [int] NOT NULL ,<br /> [Name] [varchar] (10) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL <br />) ON [PRIMARY]<br /></span><br />to<br /><span class="code"><br />CREATE TABLE [dbo].[Person] <br />( [PersonID] [int] NOT NULL ,<br /> [Name] [varchar] (10) NOT NULL <br />) ON [PRIMARY]<br /></span><br />We let our databases take the default collation from the server, rather than forcing our own.  This can still lead to issues and I've had the <br /><span class="code"><br />Msg 468, Level 16, State 9, Line 1<p />Cannot resolve the collation conflict between "SQL_Latin1_General_CP1_CI_AS" and "Latin1_General_CI_AS" in the equal to operation.<br /></span> error when doing casts rather than joins.  To get around this I've used <a href="http://exold.com/article/sql-server-collation-and-temp-tables">COLLATE database_default</a> to fix it, for example<br /><span class="code">SELECT @strName = "THE" +  ISNULL(CAST(@intID AS VARCHAR(10)),'NULL') COLLATE database_default<br /></span><div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/14400377-115278604232329912?l=jane.dallaway.com%2Fblog%2Fblog.html" height="1" alt="" width="1" /></div>
